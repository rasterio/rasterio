

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>rasterio.features module &mdash; rasterio 1.0a9 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="rasterio 1.0a9 documentation" href="../index.html"/>
        <link rel="up" title="rasterio package" href="index.html"/>
        <link rel="next" title="rasterio.fill module" href="rasterio.fill.html"/>
        <link rel="prev" title="rasterio.errors module" href="rasterio.errors.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> rasterio
          

          
          </a>

          
            
            
              <div class="version">
                1.0a9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../switch.html">Switching from GDAL&#8217;s Python bindings</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../topics/color.html">Color</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/concurrency.html">Concurrent processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/errors.html">Error Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/features.html">Vector Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/fillnodata.html">Filling nodata areas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/georeferencing.html">Georeferencing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/image_options.html">Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/image_processing.html">Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/masking-by-shapefile.html">Masking a raster using a shapefile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/masks.html">Nodata Masks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/memory-files.html">In-Memory Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/migrating-to-v1.html">Migrating to Rasterio 1.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/overviews.html">Overviews</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/plotting.html">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/reproject.html">Reprojection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/resampling.html">Resampling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/tags.html">Tagging datasets and bands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/vsi.html">Virtual Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/windowed-rw.html">Windowed reading and writing</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">rasterio package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="rasterio.compat.html">rasterio.compat module</a></li>
<li class="toctree-l3"><a class="reference internal" href="rasterio.coords.html">rasterio.coords module</a></li>
<li class="toctree-l3"><a class="reference internal" href="rasterio.crs.html">rasterio.crs module</a></li>
<li class="toctree-l3"><a class="reference internal" href="rasterio.drivers.html">rasterio.drivers module</a></li>
<li class="toctree-l3"><a class="reference internal" href="rasterio.dtypes.html">rasterio.dtypes module</a></li>
<li class="toctree-l3"><a class="reference internal" href="rasterio.enums.html">rasterio.enums module</a></li>
<li class="toctree-l3"><a class="reference internal" href="rasterio.env.html">rasterio.env module</a></li>
<li class="toctree-l3"><a class="reference internal" href="rasterio.errors.html">rasterio.errors module</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">rasterio.features module</a></li>
<li class="toctree-l3"><a class="reference internal" href="rasterio.fill.html">rasterio.fill module</a></li>
<li class="toctree-l3"><a class="reference internal" href="rasterio.io.html">rasterio.io module</a></li>
<li class="toctree-l3"><a class="reference internal" href="rasterio.mask.html">rasterio.mask module</a></li>
<li class="toctree-l3"><a class="reference internal" href="rasterio.merge.html">rasterio.merge module</a></li>
<li class="toctree-l3"><a class="reference internal" href="rasterio.plot.html">rasterio.plot module</a></li>
<li class="toctree-l3"><a class="reference internal" href="rasterio.profiles.html">rasterio.profiles module</a></li>
<li class="toctree-l3"><a class="reference internal" href="rasterio.sample.html">rasterio.sample module</a></li>
<li class="toctree-l3"><a class="reference internal" href="rasterio.transform.html">rasterio.transform module</a></li>
<li class="toctree-l3"><a class="reference internal" href="rasterio.vfs.html">rasterio.vfs module</a></li>
<li class="toctree-l3"><a class="reference internal" href="rasterio.warp.html">rasterio.warp module</a></li>
<li class="toctree-l3"><a class="reference internal" href="rasterio.windows.html">rasterio.windows module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-rasterio">Module contents</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command Line Users Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">rasterio</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">rasterio package</a> &raquo;</li>
      
    <li>rasterio.features module</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/api/rasterio.features.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-rasterio.features">
<span id="rasterio-features-module"></span><h1>rasterio.features module<a class="headerlink" href="#module-rasterio.features" title="Permalink to this headline">¶</a></h1>
<p>Functions for working with features in a raster dataset.</p>
<dl class="function">
<dt id="rasterio.features.bounds">
<code class="descclassname">rasterio.features.</code><code class="descname">bounds</code><span class="sig-paren">(</span><em>geometry</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rasterio/features.html#bounds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rasterio.features.bounds" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a (minx, miny, maxx, maxy) bounding box.</p>
<p>From Fiona 1.4.8. Modified to return bbox from geometry if available.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>geometry: GeoJSON-like feature, feature collection, or geometry.</strong></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">tuple</p>
<blockquote class="last">
<div><p>Bounding box: (minx, miny, maxx, maxy)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="rasterio.features.geometry_mask">
<code class="descclassname">rasterio.features.</code><code class="descname">geometry_mask</code><span class="sig-paren">(</span><em>geometries</em>, <em>out_shape</em>, <em>transform</em>, <em>all_touched=False</em>, <em>invert=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rasterio/features.html#geometry_mask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rasterio.features.geometry_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a mask from shapes.</p>
<p>By default, mask is intended for use as a
numpy mask, where pixels that overlap shapes are False.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>geometries</strong> : iterable over geometries (GeoJSON-like objects)</p>
<p><strong>out_shape</strong> : tuple or list</p>
<blockquote>
<div><p>Shape of output numpy ndarray.</p>
</div></blockquote>
<p><strong>transform</strong> : Affine transformation object</p>
<blockquote>
<div><p>Transformation from pixel coordinates of <cite>image</cite> to the
coordinate system of the input <cite>shapes</cite>. See the <cite>transform</cite>
property of dataset objects.</p>
</div></blockquote>
<p><strong>all_touched</strong> : boolean, optional</p>
<blockquote>
<div><p>If True, all pixels touched by geometries will be burned in.  If
false, only pixels whose center is within the polygon or that
are selected by Bresenham&#8217;s line algorithm will be burned in.</p>
</div></blockquote>
<p><strong>invert: boolean, optional</strong></p>
<blockquote>
<div><p>If True, mask will be True for pixels that overlap shapes.
False by default.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>out</strong> : numpy ndarray of type &#8216;bool&#8217;</p>
<blockquote class="last">
<div><p>Result</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="rasterio.features.rasterize">
<code class="descclassname">rasterio.features.</code><code class="descname">rasterize</code><span class="sig-paren">(</span><em>shapes</em>, <em>out_shape=None</em>, <em>fill=0</em>, <em>out=None</em>, <em>transform=Affine(1.0</em>, <em>0.0</em>, <em>0.0</em>, <em>0.0</em>, <em>1.0</em>, <em>0.0)</em>, <em>all_touched=False</em>, <em>default_value=1</em>, <em>dtype=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rasterio/features.html#rasterize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rasterio.features.rasterize" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an image array with input geometries burned in.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>shapes</strong> : iterable of (geometry, value) pairs or iterable over</p>
<blockquote>
<div><p>geometries. <cite>geometry</cite> can either be an object that implements
the geo interface or GeoJSON-like object.</p>
</div></blockquote>
<p><strong>out_shape</strong> : tuple or list with 2 integers</p>
<blockquote>
<div><p>Shape of output numpy ndarray.</p>
</div></blockquote>
<p><strong>fill</strong> : int or float, optional</p>
<blockquote>
<div><p>Used as fill value for all areas not covered by input
geometries.</p>
</div></blockquote>
<p><strong>out</strong> : numpy ndarray, optional</p>
<blockquote>
<div><p>Array of same shape and data type as <cite>image</cite> in which to store
results.</p>
</div></blockquote>
<p><strong>transform</strong> : Affine transformation object, optional</p>
<blockquote>
<div><p>Transformation from pixel coordinates of <cite>image</cite> to the
coordinate system of the input <cite>shapes</cite>. See the <cite>transform</cite>
property of dataset objects.</p>
</div></blockquote>
<p><strong>all_touched</strong> : boolean, optional</p>
<blockquote>
<div><p>If True, all pixels touched by geometries will be burned in.  If
false, only pixels whose center is within the polygon or that
are selected by Bresenham&#8217;s line algorithm will be burned in.</p>
</div></blockquote>
<p><strong>default_value</strong> : int or float, optional</p>
<blockquote>
<div><p>Used as value for all geometries, if not provided in <cite>shapes</cite>.</p>
</div></blockquote>
<p><strong>dtype</strong> : rasterio or numpy data type, optional</p>
<blockquote>
<div><p>Used as data type for results, if <cite>out</cite> is not provided.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>out</strong> : numpy ndarray</p>
<blockquote class="last">
<div><p>Results</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Valid data types for <cite>fill</cite>, <cite>default_value</cite>, <cite>out</cite>, <cite>dtype</cite> and
shape values are rasterio.int16, rasterio.int32, rasterio.uint8,
rasterio.uint16, rasterio.uint32, rasterio.float32,
rasterio.float64.</p>
</dd></dl>

<dl class="function">
<dt id="rasterio.features.shapes">
<code class="descclassname">rasterio.features.</code><code class="descname">shapes</code><span class="sig-paren">(</span><em>image</em>, <em>mask=None</em>, <em>connectivity=4</em>, <em>transform=Affine(1.0</em>, <em>0.0</em>, <em>0.0</em>, <em>0.0</em>, <em>1.0</em>, <em>0.0)</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rasterio/features.html#shapes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rasterio.features.shapes" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield (polygon, value for each set of adjacent pixels of the same value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>image</strong> : numpy ndarray or rasterio Band object</p>
<blockquote>
<div><p>(RasterReader, bidx namedtuple).
Data type must be one of rasterio.int16, rasterio.int32,
rasterio.uint8, rasterio.uint16, or rasterio.float32.</p>
</div></blockquote>
<p><strong>mask</strong> : numpy ndarray or rasterio Band object, optional</p>
<blockquote>
<div><p>Values of False or 0 will be excluded from feature generation
Must evaluate to bool (<a href="#id1"><span class="problematic" id="id2">rasterio.bool_</span></a> or rasterio.uint8)</p>
</div></blockquote>
<p><strong>connectivity</strong> : int, optional</p>
<blockquote>
<div><p>Use 4 or 8 pixel connectivity for grouping pixels into features</p>
</div></blockquote>
<p><strong>transform</strong> : Affine transformation, optional</p>
<blockquote>
<div><p>If not provided, feature coordinates will be generated based on pixel
coordinates</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yields:</th><td class="field-body"><p class="first">tuple</p>
<blockquote class="last">
<div><p>A pair of (polygon, value) for each feature found in the image.
Polygons are GeoJSON-like dicts and the values are the associated value
from the image, in the data type of the image.
Note: due to floating point precision issues, values returned from a
floating point image may not exactly match the original values.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The amount of memory used by this algorithm is proportional to the number
and complexity of polygons produced.  This algorithm is most appropriate
for simple thematic data.  Data with high pixel-to-pixel variability, such
as imagery, may produce one polygon per pixel and consume large amounts of
memory.</p>
</dd></dl>

<dl class="function">
<dt id="rasterio.features.sieve">
<code class="descclassname">rasterio.features.</code><code class="descname">sieve</code><span class="sig-paren">(</span><em>image</em>, <em>size</em>, <em>out=None</em>, <em>mask=None</em>, <em>connectivity=4</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rasterio/features.html#sieve"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rasterio.features.sieve" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace small polygons in <cite>image</cite> with value of their largest neighbor.</p>
<p>Polygons are found for each set of neighboring pixels of the same value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>image</strong> : numpy ndarray or rasterio Band object</p>
<blockquote>
<div><p>(RasterReader, bidx namedtuple)
Must be of type rasterio.int16, rasterio.int32, rasterio.uint8,
rasterio.uint16, or rasterio.float32</p>
</div></blockquote>
<p><strong>size</strong> : int</p>
<blockquote>
<div><p>minimum polygon size (number of pixels) to retain.</p>
</div></blockquote>
<p><strong>out</strong> : numpy ndarray, optional</p>
<blockquote>
<div><p>Array of same shape and data type as <cite>image</cite> in which to store results.</p>
</div></blockquote>
<p><strong>mask</strong> : numpy ndarray or rasterio Band object, optional</p>
<blockquote>
<div><p>Values of False or 0 will be excluded from feature generation
Must evaluate to bool (<a href="#id3"><span class="problematic" id="id4">rasterio.bool_</span></a> or rasterio.uint8)</p>
</div></blockquote>
<p><strong>connectivity</strong> : int, optional</p>
<blockquote>
<div><p>Use 4 or 8 pixel connectivity for grouping pixels into features</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>out</strong> : numpy ndarray</p>
<blockquote class="last">
<div><p>Result</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>GDAL only supports values that can be cast to 32-bit integers for this
operation.</p>
<p>The amount of memory used by this algorithm is proportional to the number
and complexity of polygons found in the image.  This algorithm is most
appropriate for simple thematic data.  Data with high pixel-to-pixel
variability, such as imagery, may produce one polygon per pixel and consume
large amounts of memory.</p>
</dd></dl>

</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="rasterio.fill.html" class="btn btn-neutral float-right" title="rasterio.fill module" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="rasterio.errors.html" class="btn btn-neutral" title="rasterio.errors module" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Mapbox.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0a9',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>