

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Quickstart &mdash; rasterio 1.0.dev1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="rasterio 1.0.dev1 documentation" href="index.html"/>
        <link rel="next" title="rasterio Python User’s Manual" href="python_manual.html"/>
        <link rel="prev" title="Introduction" href="intro.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> rasterio
          

          
          </a>

          
            
            
              <div class="version">
                1.0.dev1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#opening-a-dataset">Opening a dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataset-properties">Dataset properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataset-georeferencing">Dataset georeferencing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reading-raster-data">Reading raster data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#writing-data">Writing data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="python_manual.html"><code class="docutils literal"><span class="pre">rasterio</span></code> Python User&#8217;s Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html"><code class="docutils literal"><span class="pre">rio</span></code> Command Line User&#8217;s Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_docs.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">rasterio</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Quickstart</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/quickstart.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h1>
<p>Have a new satellite image or other raster data to dig into? Here are
examples using an imaginary GeoTIFF file named &#8220;example.tif&#8221;. The examples
presume that Rasterio has been <a class="reference external" href="./installation">installed</a>.</p>
<img alt="_images/RGB.byte.jpg" src="_images/RGB.byte.jpg" />
<p>The &#8220;example.tif&#8221; raster covers the Bahamas.</p>
<div class="section" id="opening-a-dataset">
<h2>Opening a dataset<a class="headerlink" href="#opening-a-dataset" title="Permalink to this headline">¶</a></h2>
<p>Import rasterio to begin.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">rasterio</span>
</pre></div>
</div>
<p>Next, open the file.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;example.tif&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Rasterio&#8217;s <code class="docutils literal"><span class="pre">rasterio.open()</span></code> takes a path and returns a dataset object. The
path may point to a file of any supported raster format. Rasterio will open it
using the appropriate GDAL format driver.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;example.tif&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">mode</span>
<span class="go">&#39;r&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">closed</span>
<span class="go">False</span>
</pre></div>
</div>
<p>Dataset objects have some of the same properties as Python file objects.</p>
</div>
<div class="section" id="dataset-properties">
<h2>Dataset properties<a class="headerlink" href="#dataset-properties" title="Permalink to this headline">¶</a></h2>
<p>Properties of the raster data stored in &#8220;example.tif&#8221; can be accessed through
properties of <cite>dataset</cite>.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">count</span>
<span class="go">3</span>
</pre></div>
</div>
<p>Dataset objects have &#8220;bands&#8221; and this example has three.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">dataset</span><span class="o">.</span><span class="n">height</span>
<span class="go">(791, 718)</span>
</pre></div>
</div>
<p>Each example band is a raster array with 791 columns and 718 rows.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">dtypes</span>
<span class="go">(&#39;uint8&#39;, &#39;uint8&#39;, &#39;uint8&#39;)</span>
</pre></div>
</div>
<p>The arrays contain unsigned 8-bit integer values. The GeoTIFF format also
supports signed integers and floats of different size.</p>
</div>
<div class="section" id="dataset-georeferencing">
<h2>Dataset georeferencing<a class="headerlink" href="#dataset-georeferencing" title="Permalink to this headline">¶</a></h2>
<p>A GIS raster dataset is different from an ordinary image. The pixels in our
example are mapped to regions on the earth&#8217;s surface.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">bounds</span>
<span class="go">BoundingBox(left=101985.0, bottom=2611485.0, right=339315.0, top=2826915.0)</span>
</pre></div>
</div>
<p>A raster dataset has a spatial bounding box. Our example covers the world from
101985 meters (in this case) to 339315 meters, left to right, and 2611485
meters to 2826915 meters bottom to top. It covers a region 237.33 kilometers
wide by 215.43 kilometers high.</p>
<p>The <code class="docutils literal"><span class="pre">bounds</span></code> property is derived from a more fundamental property: the
dataset&#8217;s geospatial <code class="docutils literal"><span class="pre">transform</span></code>.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">transform</span>
<span class="go">Affine(300.0379266750948, 0.0, 101985.0,</span>
<span class="go">       0.0, -300.041782729805, 2826915.0)</span>
</pre></div>
</div>
<p>This is an affine transformation matrix that maps pixel locations in (row, col)
coordinates to (x, y) spatial positions. The product of this matrix and <code class="docutils literal"><span class="pre">(0,</span>
<span class="pre">0)</span></code>, the row and column coordinates of the upper left corner of the dataset,
is the spatial position of the upper left corner.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">transform</span> <span class="o">*</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">(101985.0, 2826915.0)</span>
</pre></div>
</div>
<p>The position of the lower right corner is obtained similarly.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">transform</span> <span class="o">*</span> <span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">dataset</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
<span class="go">(339315.0, 2611485.0)</span>
</pre></div>
</div>
<p>But what do these numbers mean? 101985 meters from where?</p>
<p>These bounding box coordinates are relative to a coordinate reference system
(CRS).</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">crs</span>
<span class="go">CRS({&#39;init&#39;: &#39;epsg:32618&#39;})</span>
</pre></div>
</div>
<p>&#8220;epsg:32618&#8221; identifies a particular coordinate reference system: <a class="reference external" href="https://en.wikipedia.org/wiki/Universal_Transverse_Mercator_coordinate_system">UTM</a>
zone 18N.  This system is used for mapping areas in the Northern Hemisphere
between 72 and 78 degrees west. The upper left corner of the example dataset,
<code class="docutils literal"><span class="pre">(101985.0,</span> <span class="pre">2826915.0)</span></code>, is 398 kilometers west of zone 18&#8217;s central meridian
(75 degrees west) and 2827 kilometers north of the equator.</p>
<p>Coordinate reference systems are an advanced topic. Suffice it to say that
between the <code class="docutils literal"><span class="pre">crs</span></code> and the <code class="docutils literal"><span class="pre">transform</span></code> a raster dataset is geo-referenced
and can be compared to other GIS datasets.</p>
</div>
<div class="section" id="reading-raster-data">
<h2>Reading raster data<a class="headerlink" href="#reading-raster-data" title="Permalink to this headline">¶</a></h2>
<p>How can the pixels of a raster band be accessed? By calling <code class="docutils literal"><span class="pre">dataset.read()</span></code>
with one of the values from <code class="docutils literal"><span class="pre">dataset.indexes</span></code>.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">indexes</span>
<span class="go">(1, 2, 3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">band_one</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>By GDAL convention, bands are indexed from 1.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">band_one</span>
<span class="go">array([[0, 0, 0, ..., 0, 0, 0],</span>
<span class="go">       [0, 0, 0, ..., 0, 0, 0],</span>
<span class="go">       [0, 0, 0, ..., 0, 0, 0],</span>
<span class="go">       ...,</span>
<span class="go">       [0, 0, 0, ..., 0, 0, 0],</span>
<span class="go">       [0, 0, 0, ..., 0, 0, 0],</span>
<span class="go">       [0, 0, 0, ..., 0, 0, 0]], dtype=uint8)</span>
</pre></div>
</div>
<p>A Numpy N-D array is returned by <code class="docutils literal"><span class="pre">read()</span></code>. Notice in the image shown above
that the dataset has a trapezoid of valid data pixels and a collar of invalid
or &#8220;no data&#8221; pixels. The no data pixels can be masked when reading by using a
keyword argument.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">band_one</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">masked</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">band_one</span>
<span class="go">masked_array(data =</span>
<span class="go"> [[-- -- -- ..., -- -- --]</span>
<span class="go"> [-- -- -- ..., -- -- --]</span>
<span class="go"> [-- -- -- ..., -- -- --]</span>
<span class="go"> ...,</span>
<span class="go"> [-- -- -- ..., -- -- --]</span>
<span class="go"> [-- -- -- ..., -- -- --]</span>
<span class="go"> [-- -- -- ..., -- -- --]],</span>
<span class="go">             mask =</span>
<span class="go"> [[ True  True  True ...,  True  True  True]</span>
<span class="go"> [ True  True  True ...,  True  True  True]</span>
<span class="go"> [ True  True  True ...,  True  True  True]</span>
<span class="go"> ...,</span>
<span class="go"> [ True  True  True ...,  True  True  True]</span>
<span class="go"> [ True  True  True ...,  True  True  True]</span>
<span class="go"> [ True  True  True ...,  True  True  True]],</span>
<span class="go">       fill_value = 0)</span>
</pre></div>
</div>
<p>Calculations on a masked array do not consider the invalid pixels.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">band_one</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">band_one</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">band_one</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="go">(1, 44.434478650699106, 255)</span>
</pre></div>
</div>
<p>Pixels of the array can be had by their row, column index.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">band_one</span><span class="p">[</span><span class="mi">150</span><span class="p">,</span> <span class="mi">300</span><span class="p">]</span>
<span class="go">21</span>
</pre></div>
</div>
<p>Datasets have a method of getting indexes for spatial points. To get the value
for the pixel 100 kilometers east and 50 kilometers south of the dataset&#8217;s
upper left corner, do the following.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="mf">201985.0</span><span class="p">,</span> <span class="mf">2776915.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">row</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">band_one</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">]</span>
<span class="go">12</span>
</pre></div>
</div>
<p>To get the spatial coordinates of a pixel, use the dataset&#8217;s <code class="docutils literal"><span class="pre">xy()</span></code> method.
The coordinates of the center of the image are</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">xy</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">dataset</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">(209848.63463969657, 2708098.454038997)</span>
</pre></div>
</div>
</div>
<div class="section" id="writing-data">
<h2>Writing data<a class="headerlink" href="#writing-data" title="Permalink to this headline">¶</a></h2>
<p>TODO.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="python_manual.html" class="btn btn-neutral float-right" title="rasterio Python User’s Manual" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="intro.html" class="btn btn-neutral" title="Introduction" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Mapbox.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.dev1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>